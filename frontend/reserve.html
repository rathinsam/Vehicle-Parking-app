<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reserve Parking Spot</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Vue.js -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
</head>
<body>
    <style>
                body{
                    background-color: rgb(87, 21, 168);
                }
            </style>
    <div class="container py-4" id="reserveApp">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2>Reserve Parking Spot</h2>
            <div>
                <button class="btn btn-secondary me-2" @click="goBack">Back to Dashboard</button>
                <button class="btn btn-danger" @click="logout">Logout</button>
            </div>
        </div>

        <!-- Active Reservation -->
        <div v-if="activeReservation" class="alert alert-info">
            <h5>Active Reservation</h5>
            <p><strong>Lot:</strong> {{ activeReservation.lot_name }}</p>
            <p><strong>Spot:</strong> {{ activeReservation.spot_id }}</p>
            <p><strong>Parked Since:</strong> {{ formatDate(activeReservation.parked_since) }}</p>
            <button class="btn btn-danger" @click="releaseSpot">Release Spot</button>
        </div>
        <div v-else class="alert alert-warning">No active reservation.</div>

        <!-- Available Lots -->
        <h4 class="mt-4">Available Lots</h4>
        <table class="table table-bordered">
            <thead class="table-light">
                <tr>
                    <th>Lot Name</th>
                    <th>Address</th>
                    <th>Available Spots</th>
                    <th>Price/hr</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <tr v-for="lot in lots" :key="lot.id">
                    <td>{{ lot.name }}</td>
                    <td>{{ lot.address }}</td>
                    <td>{{ lot.available_spots }}</td>
                    <td>â‚¹{{ lot.price }}</td>
                    <td>
                        <button class="btn btn-primary btn-sm" @click="reserveLot(lot.id)" :disabled="activeReservation">
                            Reserve
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>

        <div v-if="message" class="alert alert-info mt-3">{{ message }}</div>
    </div>

    <!-- Custom JS -->
    <script src="reserve.js"></script>
</body>
</html>


